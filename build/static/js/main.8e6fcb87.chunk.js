(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,n){},16:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),c=n(2),o=n.n(c),s=(n(15),n(3)),l=n(4),r=n(5),u=n(7),m=n(6),h=n(8),d=(n(16),n(17)),p=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={list:[],isManage:!1,title:"",price:"",desc:"",image:""},n}return Object(h.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("http://localhost:3000/five/list").then(function(e){return e.json()}).then(function(t){e.setState({list:t.fiveList,isManage:Boolean(window.location.search)})})}},{key:"onChange",value:function(e,t){this.setState(Object(s.a)({},e,t.target.value))}},{key:"upload",value:function(e){var t=this,n=e.target.files;fetch("http://localhost:3000/uploadToken").then(function(e){return e.json()}).then(function(e){var a=e.uploadToken,i=Array.prototype.slice.call(n);d.upload(i[0],i[0].name,a).subscribe(function(e){t.setState({image:"http://www.qiniu.cmty.xyz/".concat(i[0].name)})})})}},{key:"submit",value:function(){var e=this.state,t=e.title,n=e.price,a=e.desc,i=e.image;fetch("http://localhost:3000/five/create",{method:"post",body:JSON.stringify({title:t,price:n,desc:a,image:i}),mode:"cors",headers:{"content-type":"application/json"}}).then(function(e){return e.json()}).then(function(e){window.location.href=window.location.origin})}},{key:"render",value:function(){return this.state.isManage?i.a.createElement("div",{className:"create"},i.a.createElement("div",{className:"inputWrap"},"\u6807\u9898\uff1a",i.a.createElement("input",{onChange:this.onChange.bind(this,"title")})),i.a.createElement("div",{className:"inputWrap"},"\u63cf\u8ff0\uff1a",i.a.createElement("input",{onChange:this.onChange.bind(this,"desc")})),i.a.createElement("div",{className:"inputWrap"},"\u4ef7\u683c\uff1a",i.a.createElement("input",{onChange:this.onChange.bind(this,"price")})),i.a.createElement("input",{type:"file",name:"file",onChange:this.upload.bind(this)}),i.a.createElement("button",{className:"sub",onClick:this.submit.bind(this)},"\u63d0\u4ea4")):i.a.createElement("div",{className:"App"},this.state.list.map(function(e){return i.a.createElement("div",{className:"item",key:e.id},i.a.createElement("img",{className:"image",alt:"",id:"img",src:e.image}),i.a.createElement("div",{className:"info"},i.a.createElement("div",{className:"titleWrap"},i.a.createElement("div",{className:"title"},i.a.createElement("b",null,e.title)),i.a.createElement("div",null,e.desc)),i.a.createElement("span",{className:"price"},e.price,"\u5143")))}))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(p,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},9:function(e,t,n){e.exports=n(18)}},[[9,1,2]]]);
//# sourceMappingURL=main.8e6fcb87.chunk.js.map